var B=Object.defineProperty,O=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var T=(o,e,a)=>e in o?B(o,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[e]=a,k=(o,e)=>{for(var a in e||(e={}))U.call(e,a)&&T(o,a,e[a]);if(A)for(var a of A(e))z.call(e,a)&&T(o,a,e[a]);return o},D=(o,e)=>O(o,V(e));import{o as d,c as p,a as t,F as w,r as _,t as u,b as v,w as g,v as f,d as H,u as P,G as q,_ as W,q as G,Q as K,Y as J,e as Y,f as h,g as Q,h as y,i as M,j as C,k as b,l as X,m as Z,n as ee,p as S,s as te,x as oe,y as x,z as se,A as ae,B as ne}from"./vendor.e12bfe6b.js";const le=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}};le();var L=(o,e)=>{for(const[a,n]of e)o[a]=n;return o};const re={props:{getLoanFees:Array},data(){return{overlayInput:null,arr:[{name:"FBI",value:6200},{name:"CIA",value:5600},{name:"DEA",value:8600},{name:"FDA",value:6600}]}},methods:{getIndex(o){o==="update"?this.overlayInput=null:this.overlayInput=o},showOverlayInput(o){if(this.overlayInput===o){this.overlayInput=null;return}this.overlayInput=o}}},ie={class:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ce={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},de=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200B",-1),ue={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6"},pe=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1),me=[pe],ge=t("div",{class:"px-4 py-5 sm:px-6 bg-gray-100"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900 uppercase"}," Other Fees ")],-1),fe={class:"pb-2"},he={class:"bg-white px-4 py-8 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 relative"},ye={class:"text-sm font-medium text-black"},be={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 flex items-center justify-end space-x-4"},xe={key:0},we=["onClick"],_e=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),ve=[_e],Ce={key:2,class:"absolute top-5 p-3 w-1/3"},ke={class:"flex space-x-2"},Pe=["onUpdate:modelValue"],Le={class:"flex space-x-1"},Ne=t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1),Re=[Ne];function Ie(o,e,a,n,s,i){return d(),p("div",ie,[t("div",ce,[t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:e[0]||(e[0]=c=>o.$emit("closeModal"))}),de,t("div",ue,[t("button",{class:"absolute top-0 right-0",onClick:e[1]||(e[1]=c=>o.$emit("closeModal"))},me),ge,t("div",fe,[(d(!0),p(w,null,_(a.getLoanFees,(c,l)=>(d(),p("div",he,[t("dt",ye,u(c.name),1),t("dd",be,[s.overlayInput!==l?(d(),p("span",xe,u(c.amount),1)):v("",!0),s.overlayInput!==l?(d(),p("button",{key:1,onClick:r=>i.getIndex(l)},ve,8,we)):v("",!0),s.overlayInput===l?(d(),p("div",Ce,[t("div",ke,[g(t("input",{"onUpdate:modelValue":r=>c.amount=r,type:"text",class:"appearance-none col-span-2 min-w-0 w-full bg-white rounded-md py-0.5 px-4 text-sm text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs"},null,8,Pe),[[f,c.amount]]),t("div",Le,[t("button",null,[(d(),p("svg",{onClick:e[2]||(e[2]=r=>i.getIndex("update")),xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},Re))])])])])):v("",!0)])]))),256))])])])])}var Ae=L(re,[["render",Ie]]);const Te=()=>{const o=P();return Object.fromEntries(Object.keys(o.getters).map(e=>[e,H(()=>o.getters[e])]))},De={components:{Dialog:q,DialogOverlay:W,DialogTitle:G,TransitionChild:K,TransitionRoot:J,CheckIcon:Y},setup(){let o=h({firstName:h(""),lastName:h(""),phoneNumber:h("254706754174"),idNumber:h("31558796"),email:h("tony@presta.tech"),username:h("l3nux")});const e=P(),a=h(""),{getToggleCreate:n}=Te();function s(c){c===!1?e.commit("setToggleCreate",!1):e.commit("setToggleCreate",!0)}function i(c){try{e.commit("setCustomerDto",o),e.commit("setToggleCreate",!1)}catch(l){alert(l.message)}}return Q(o,(c,l)=>{console.log("changed")},{deep:!0}),Q(a,(c,l)=>{let r=c.trim().split(/\s+/);o.value.firstName=r[0],o.value.lastName=r[1]}),{fullName:a,objectRef:o,toggleModal:s,submit:i,getToggleCreate:n}}},Qe={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Me=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200B",-1),Se={class:"relative inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6"},Ee={class:"bg-white py-4 px-4 sm:px-6 lg:col-span-3 lg:6 lg:px-8 xl:pl-12"},je=t("div",{class:"text-center pb-8"},[t("h1",{class:"uppercase text-lg font-medium text-black"}," Create Customer ")],-1),$e={class:"max-w-lg mx-auto lg:max-w-none"},Fe=t("label",{for:"full-name"},"Full name",-1),Be=t("label",{for:"username"},"username",-1),Oe=t("label",{for:"phone"},"ID Number",-1),Ve=t("label",{for:"phone"},"Phone Number",-1),Ue=t("label",{for:"email"},"Email",-1);function ze(o,e,a,n,s,i){const c=y("DialogOverlay"),l=y("TransitionChild"),r=y("Dialog"),I=y("TransitionRoot");return d(),M(I,{as:"template",show:n.getToggleCreate},{default:C(()=>[b(r,{as:"div",class:"fixed z-10 inset-0 overflow-y-auto",onClose:e[7]||(e[7]=m=>n.toggleModal(!1))},{default:C(()=>[t("div",Qe,[b(l,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:C(()=>[b(c,{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})]),_:1}),Me,b(l,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:C(()=>[t("div",Se,[t("div",Ee,[je,t("div",$e,[t("form",{onSubmit:e[6]||(e[6]=X(()=>{},["prevent"])),action:"#",method:"POST",class:"grid grid-cols-1 gap-y-6"},[t("div",null,[Fe,g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=m=>n.fullName=m),type:"text",name:"full-name",id:"full-name",autocomplete:"name",class:"block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-gray-900 focus:border-indigo-500 border-gray-300 rounded-md",placeholder:"Full name"},null,512),[[f,n.fullName]])]),t("div",null,[Be,g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=m=>n.objectRef.username=m),type:"text",name:"period",id:"username",autocomplete:"tel",class:"block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-gray-900 focus:border-indigo-500 border-gray-300 rounded-md",placeholder:"username"},null,512),[[f,n.objectRef.username]])]),t("div",null,[Oe,g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=m=>n.objectRef.idNumber=m),type:"text",name:"idNumber",id:"idNumber",autocomplete:"tel",class:"block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-gray-900 focus:border-indigo-500 border-gray-300 rounded-md",placeholder:"idNumber"},null,512),[[f,n.objectRef.idNumber]])]),t("div",null,[Ve,g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=m=>n.objectRef.phoneNumber=m),type:"text",name:"phone",id:"phone",autocomplete:"tel",class:"block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-gray-900 focus:border-indigo-500 border-gray-300 rounded-md",placeholder:"Phone Number"},null,512),[[f,n.objectRef.phoneNumber]])]),t("div",null,[Ue,g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=m=>n.objectRef.email=m),type:"text",name:"email",id:"email",autocomplete:"tel",class:"block w-full shadow-sm py-3 px-4 placeholder-gray-500 focus:ring-gray-900 focus:border-indigo-500 border-gray-300 rounded-md",placeholder:"Email"},null,512),[[f,n.objectRef.email]])]),t("div",null,[t("button",{type:"submit",onClick:e[5]||(e[5]=(...m)=>n.submit&&n.submit(...m)),class:"inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"},"Save")])],32)])])])]),_:1})])]),_:1})]),_:1},8,["show"])}var He=L(De,[["render",ze]]);const qe={components:{modal:Ae,customerModal:He},transition:"slide-bottom",data(){return{modalActive:!1,fullName:null,loanProduct:null,principal:null,loanTypes:[],downloadDAta:["disbursement BD","schedule BD"],calculationMethod:["FLAT_RATE","REDUCING_BALANCE","COMPOUND"],loanCalculationPayload:{loanProductRefId:null,principal:15e6,interestRate:2.5,interestCalcMethod:"REDUCING_BALANCE",loanTerm:18},generateQuotationPayload:{loanProductRefId:null,customerRefId:null,firstName:null,lastName:null,phoneNumber:"254725668838",amount:null,period:null},interestType:["Interest 1","Interest 2"]}},computed:k({},Z(["getQuotationNumber","getCustomerDto","getToggleCreate","getQuotation","getLoanProducts","getLoanFees","getLoanCalculationResponse","getLoanSchedule","getPostLoanCalculation"])),methods:D(k({},ee(["generateQuotation","fetchQuotation","fetchLoanProducts","fetchLoanCalculations","fetchLoanSchedule","createLoanCalculation"])),{getLoanProductRfid(o){this.loanProduct=this.loanCalculationPayload.loanProductRefId,this.getLoanProducts.data.forEach((e,a)=>{e.name===this.loanCalculationPayload.loanProductRefId&&(this.loanCalculationPayload.loanProductRefId=e.refId)})},getPrincipal(o){let e=o.target.value;this.principal=this.numberWithCommas(e),console.log("principal",e),e.includes(",")?(console.log("Has commas"),e=e.replace(/\,/g,""),console.log("commas removed",e),this.loanCalculationPayload.principal=e,this.principal=this.numberWithCommas(e)):(console.log("No commas"),this.principal=this.numberWithCommas(e))},mountModal(){this.modalActive=!this.modalActive},numberWithCommas(o){return o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},async genQuotation(o){try{if(o==="update"){let e=this.generateQuotationPayload.phoneNumber;console.log("fetchQuotation payload",e),await this.fetchQuotation(e)}else if(o==="confirm"){console.log("generateQuotation payload",this.getCustomerDto),this.getLoanProductRfid();let e={loanProductRefId:this.loanCalculationPayload.loanProductRefId,customerRefId:null,firstName:this.getCustomerDto.firstName,lastName:this.getCustomerDto.lastName,phoneNumber:"254706754174",amount:156800,period:26.3,customerDto:null};this.getQuotation?(e.customerDto=null,e.customerRefId=this.getQuotation):(e.customerDto=this.getCustomerDto,e.customerRefId=null),await this.generateQuotation(e)}else console.log("kill this shit")}catch(e){alert(e)}finally{this.loanCalculationPayload.loanProductRefId=this.loanProduct}},async submit(){try{this.getLoanProductRfid(),console.log("loanCalculationPayload",this.loanCalculationPayload),await this.createLoanCalculation(this.loanCalculationPayload)}catch(o){alert(o)}finally{console.log("prdct",this.loanProduct),this.loanCalculationPayload.loanProductRefId=this.loanProduct}}}),watch:{fullName(o){let e=o.trim().split(/\s+/);this.generateQuotationPayload.firstName=e[0],this.generateQuotationPayload.lastName=e[1],console.log("first name",this.generateQuotationPayload.firstName),console.log("last name",this.generateQuotationPayload.lastName),this.generateQuotationPayload.lastName||alert("enter full name")}},mounted(){console.log("mounted!"),this.getLoanProducts&&(this.loanTypes=this.getLoanProducts)},async created(){await Promise.all([this.fetchLoanCalculations(""),this.fetchLoanSchedule(""),this.fetchLoanProducts(""),console.log("getLoanProducts",this.getLoanProducts)])}},We={class:"mx-auto"},Ge={class:"space-y-2 px-10 pt-10 pb-20 bg-gray-50"},Ke=t("div",{class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 bg-white shadow"},[t("h1",{class:"uppercase text-lg font-medium text-black"}," Loan Calculator ")],-1),Je={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 bg-white shadow"},Ye={class:"grid grid-cols-8 gap-6"},Xe={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},Ze=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Phone Number: ",-1),et={class:"w-full col-span-2 flex flex-grow rounded-md shadow-sm"},tt=t("div",{class:"py-2 col-span-2 flex justify-center"},null,-1),ot={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},st=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Quotation NO: ",-1),at={type:"text",class:"appearance-none col-span-2 border-2 border-gray-200 min-w-0 w-full bg-white border active:outline-red-200 rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs",readonly:""},nt={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 bg-white shadow"},lt={class:"grid grid-cols-8 gap-6"},rt={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},it=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Loan Type ",-1),ct={class:"p-0"},dt={class:"py-2 col-span-2 flex justify-center"},ut={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},pt=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Principal Amt: ",-1),mt={type:"text",class:"appearance-none col-span-2 border-2 border-gray-200 min-w-0 w-full bg-white border active:outline-red-200 rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs",readonly:""},gt={class:"grid grid-cols-8 gap-6"},ft={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},ht=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Principal Amt: ",-1),yt=["value"],bt={class:"py-2 col-span-2 flex justify-center"},xt={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},wt=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Repay Amt: ",-1),_t={type:"text",class:"appearance-none col-span-2 border-2 border-gray-200 min-w-0 w-full bg-white border active:outline-red-200 rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs",readonly:""},vt={class:"grid grid-cols-8 gap-6"},Ct={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},kt=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Interest Rate (%): ",-1),Pt=t("div",{class:"py-2 col-span-2 flex justify-center"},null,-1),Lt={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},Nt=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Total Interest: ",-1),Rt={type:"text",class:"appearance-none col-span-2 border-2 border-gray-200 min-w-0 w-full bg-white border active:outline-red-200 rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs",readonly:""},It={class:"grid grid-cols-8 gap-6"},At={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},Tt=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Loan Term (Months): ",-1),Dt=t("div",{class:"py-2 col-span-2 flex justify-center"},null,-1),Qt={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},Mt=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Total Repayable: ",-1),St={type:"text",class:"appearance-none col-span-2 border-2 border-gray-200 min-w-0 w-full bg-white border active:outline-red-200 rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs",readonly:""},Et={class:"grid grid-cols-8 gap-6"},jt={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},$t=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Interest Calculation Method: ",-1),Ft=t("div",{class:"py-2 col-span-2 flex justify-center"},null,-1),Bt={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},Ot=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Total Periods: ",-1),Vt={type:"text",class:"appearance-none col-span-2 border-2 border-gray-200 min-w-0 w-full bg-white border active:outline-red-200 rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs",readonly:""},Ut={class:"grid grid-cols-8 gap-6"},zt=t("div",{class:"py-2 col-span-3 grid grid-cols-3 gap-2"},null,-1),Ht=t("div",{class:"py-2 col-span-2 flex justify-center"},null,-1),qt={class:"py-2 col-span-3 grid grid-cols-3 gap-2"},Wt=t("label",{class:"block text-sm font-light text-black sm:mt-px sm:pt-2"}," Other Charges: ",-1),Gt={class:"mt-1 col-span-2 flex space-x-2 rounded-md shadow-sm"},Kt=t("div",{class:"relative flex items-stretch flex-grow focus-within:z-10"},[t("input",{class:"appearance-none cursor-default col-span-2 border-2 border-gray-200 min-w-0 w-full bg-white border rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs",readonly:""})],-1),Jt=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})],-1),Yt=[Jt],Xt=t("div",{class:"grid grid-cols-8 gap-6"},[t("div",{class:"py-2 col-span-3 grid grid-cols-3 gap-2"}),t("div",{class:"py-2 col-span-2 flex justify-center"})],-1),Zt={class:"max-w-7xl max-h-96 mx-auto py-6 px-4 sm:px-6 lg:px-8 bg-white shadow overflow-y-scroll"},eo={class:"min-w-full divide-y divide-gray-200"},to=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-sm font-bold text-gray-900 bg-blue-100 uppercase tracking-wider"}," Period "),t("th",{scope:"col",class:"px-6 py-3 text-left text-sm font-bold text-gray-900 bg-blue-100 uppercase tracking-wider"}," Interest (KSH) "),t("th",{scope:"col",class:"px-6 py-3 text-left text-sm font-bold text-gray-900 bg-blue-100 uppercase tracking-wider"}," Principal paid (KSH) "),t("th",{scope:"col",class:"px-6 py-3 text-left text-sm font-bold text-gray-900 bg-blue-100 uppercase tracking-wider"}," Installment (KSH) "),t("th",{scope:"col",class:"px-6 py-3 text-left text-sm font-bold text-gray-900 bg-blue-100 uppercase tracking-wider"}," Balance (KSH) "),t("th",{scope:"col",class:"px-6 py-3 text-left text-sm font-bold text-gray-900 bg-blue-100 uppercase tracking-wider"}," Total Interest (KSH) ")])],-1),oo={class:"overflow-x-scroll"},so={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ao={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},no={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},lo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ro={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},io={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"};function co(o,e,a,n,s,i){const c=y("modal"),l=y("customer-modal");return d(),p("div",We,[t("div",Ge,[Ke,t("div",Je,[t("div",Ye,[t("div",Xe,[Ze,t("div",et,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>s.generateQuotationPayload.phoneNumber=r),type:"text",class:"flex-1 flex-grow block w-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 rounded-none rounded-l-md sm:text-sm border-gray-300"},null,512),[[f,s.generateQuotationPayload.phoneNumber]]),t("span",{onClick:e[1]||(e[1]=r=>i.genQuotation("update")),class:"inline-flex cursor-default items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 hover:bg-gray-200 text-gray-500 sm:text-sm"},"update")])]),tt,t("div",ot,[st,t("div",at,u(o.getQuotationNumber),1)])])]),t("div",nt,[t("div",lt,[t("div",rt,[it,g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>s.loanCalculationPayload.loanProductRefId=r),class:"col-span-2 border-2 border-gray-500 cursor-pointer min-w-0 w-full bg-white border rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs"},[(d(!0),p(w,null,_(o.getLoanProducts.data,(r,I)=>(d(),p("option",{key:r},[t("span",ct,u(r.name),1)]))),128))],512),[[S,s.loanCalculationPayload.loanProductRefId]])]),t("div",dt,[t("button",{type:"button",class:"flex items-center uppercase justify-center w-32 px-4 py-2 border text-base font-medium rounded-md shadow-sm text-black bg-gray-200 hover:bg-opacity-70 sm:px-8",onClick:e[3]||(e[3]=(...r)=>i.submit&&i.submit(...r))}," Compute ")]),t("div",ut,[pt,t("div",mt,u(o.getLoanCalculationResponse.principal),1)])]),t("div",gt,[t("div",ft,[ht,t("input",{value:s.principal,type:"text",onInput:e[4]||(e[4]=r=>i.getPrincipal(r)),class:"appearance-none col-span-2 border-2 border-gray-500 min-w-0 w-full bg-white border rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs"},null,40,yt)]),t("div",bt,[t("button",{type:"button",onClick:e[5]||(e[5]=r=>i.genQuotation("confirm")),class:"flex items-center uppercase justify-center w-32 px-4 py-2 border text-base font-medium rounded-md shadow-sm text-black bg-gray-200 hover:bg-opacity-70 sm:px-8"}," confirm ")]),t("div",xt,[wt,t("div",_t,u(o.getLoanCalculationResponse.repayAmount),1)])]),t("div",vt,[t("div",Ct,[kt,g(t("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>s.loanCalculationPayload.interestRate=r),type:"text",class:"appearance-none col-span-2 border-2 border-gray-500 min-w-0 w-full bg-white border rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs"},null,512),[[f,s.loanCalculationPayload.interestRate,void 0,{lazy:!0}]])]),Pt,t("div",Lt,[Nt,t("div",Rt,u(o.getLoanCalculationResponse.interestAmount),1)])]),t("div",It,[t("div",At,[Tt,g(t("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>s.loanCalculationPayload.loanTerm=r),type:"text",placeholder:"e.g 3",class:"appearance-none col-span-2 border-2 border-gray-500 min-w-0 w-full bg-white border active:outline-red-200 rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs"},null,512),[[f,s.loanCalculationPayload.loanTerm,void 0,{lazy:!0}]])]),Dt,t("div",Qt,[Mt,t("div",St,u(o.getLoanCalculationResponse.totalRepayAmount),1)])]),t("div",Et,[t("div",jt,[$t,g(t("select",{"onUpdate:modelValue":e[8]||(e[8]=r=>s.loanCalculationPayload.interestCalcMethod=r),class:"col-span-2 border-2 cursor-pointer border-gray-500 min-w-0 w-full bg-white border rounded-md py-1.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white focus:border-white focus:placeholder-gray-400 sm:max-w-xs"},[(d(!0),p(w,null,_(s.calculationMethod,r=>(d(),p("option",{key:r},u(r),1))),128))],512),[[S,s.loanCalculationPayload.interestCalcMethod]])]),Ft,t("div",Bt,[Ot,t("div",Vt,u(o.getLoanCalculationResponse.totalPeriods),1)])]),t("div",Ut,[zt,Ht,t("div",qt,[Wt,t("div",Gt,[Kt,t("button",{type:"button",class:"-ml-px relative inline-flex items-center space-x-2 px-4 py-2 border border-gray-500 text-sm font-medium rounded-md text-gray-700 bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",onClick:e[9]||(e[9]=(...r)=>i.mountModal&&i.mountModal(...r))},Yt)])])]),Xt]),t("div",Zt,[t("table",eo,[to,t("tbody",oo,[(d(!0),p(w,null,_(o.getLoanSchedule,r=>(d(),p("tr",{key:r.periodNo,class:"bg-white"},[t("td",so,u(r.installmentNo),1),t("td",ao,u(i.numberWithCommas(r.interestAmount)),1),t("td",no,u(i.numberWithCommas(r.principal)),1),t("td",lo,u(i.numberWithCommas(r.totalAmount)),1),t("td",ro,u(i.numberWithCommas(r.reducingBalance)),1),t("td",io,u(i.numberWithCommas(r.interestAmount)),1)]))),128))])])])]),s.modalActive?(d(),M(c,{key:0,getLoanFees:o.getLoanFees,onCloseModal:e[10]||(e[10]=r=>s.modalActive=!s.modalActive)},null,8,["getLoanFees"])):v("",!0),b(l)])}var uo=L(qe,[["render",co]]);const po=[{path:"/loan-calculator/",name:"Home",component:uo}],mo=te({history:oe(),routes:po}),N=x.create(),R=({url:o,data:e,method:a,headers:n},s)=>new Promise((i,c)=>{setTimeout(()=>{try{a==="GET"?N.get(o,s).then(l=>{i(l.data)}).catch(l=>{c(new Error(l))}):a==="POST"?N.post(o,e,s).then(l=>{i(l.data)}).catch(l=>{c(new Error(l))}):a==="PUT"?N.put(o,e,s).then(l=>{i(l.data)}).catch(l=>{c(new Error(l))}):a==="DELETE"&&x({method:"delete",url:o,data:null}).then(l=>{i(l.data)}).catch(l=>{c(new Error(l))})}catch(l){c(new Error(l))}},1e3)}),go=x.create();go.interceptors.response.use(o=>{if(o.status===302){const e=window.location.href;window.location.href=`https://accounts.presta.co.ke?redirect_url=${e}`;return}return o});const E=se({state(){return{user:null,notification:{message:null,success:!1,warning:!1,error:!1},loanCalculationResponse:[],loanSchedule:[],postLoanCalculation:[],loanProducts:[],loanFees:[],quotation:null,quotationNumber:null,toggleCreate:!1,customerDto:{}}},getters:{getNotification:o=>o.notification,getLoanCalculationResponse:o=>o.loanCalculationResponse,getLoanSchedule:o=>o.loanSchedule,getLoanFees:o=>o.loanFees,getPostLoanCalculation:o=>o.postLoanCalculation,getLoanProducts:o=>o.loanProducts,getQuotation:o=>o.quotation,getQuotationNumber:o=>o.quotationNumber,getCustomerDto:o=>o.customerDto,getToggleCreate:o=>o.toggleCreate},mutations:{set_current_user(o,e){o.user=e},setLoanCalculationResponse:(o,e=[])=>{o.loanCalculationResponse=e},setPostLoanCalculation:(o,e=[])=>{o.postLoanCalculation=e},setLoanFees:(o,e=[])=>{o.loanFees=e},setLoanSchedule:(o,e=[])=>{o.loanSchedule=e},setLoanProduct:(o,e=[])=>{o.loanProducts=e},setQuotation:(o,e=[])=>{o.quotation=e},setQuotationNumber:(o,e=[])=>{o.quotationNumber=e},setCustomerDto:(o,e=[])=>{o.customerDto=e},setToggleCreate:(o,e=[])=>{o.toggleCreate=e}},actions:{async fetchLoanProducts({commit:o},e){const a="https://lending.presta.co.ke/kopesha/api/t10007/loanproducts?status=ACTIVE",n=new Headers;let s;return n.append("Authorization","*/*"),n.append("Access-Control-Allow-Origin","*, *"),R({url:a,method:"GET",headers:n},{withCredentials:!0}).then(l=>{s=l,o("setLoanProduct",l)}).catch(l=>{alert(JSON.stringify(l.message))}),s},async fetchQuotation({commit:o},e){const a=`https://lending.presta.co.ke/kopesha/api/v1/customers/search?phoneNumber=${e}&isSendSMSQuote=false`,n=new Headers;let s;return n.append("Authorization","*/*"),n.append("Access-Control-Allow-Origin","*, *"),R({url:a,method:"GET",headers:n},{withCredentials:!0}).then(l=>{l.refId?(s=l.refId,o("setQuotation",s)):o("setToggleCreate",!0)}).catch(l=>{alert(JSON.stringify(l.message))}),s},async createLoanCalculation({commit:o},e){const a="https://lending.presta.co.ke/kopesha/api/v1/quotation/calculate ",n=await x.post(a,e);function s(c){return c.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}let i={quotationNumber:"null",principal:s(n.data.loan.principal),repayAmount:s(n.data.repayAmount),totalRepayAmount:s(n.data.totalRepayable),interestAmount:s(n.data.totalInterest),totalPeriods:n.data.loan.settings.loanTermConfig.repaymentPeriod,otherCharges:null,monthlyCharges:null};return o("setLoanCalculationResponse",i),o("setLoanSchedule",n.data.loan.paymentSchedule),o("setLoanFees",n.data.loan.loanFees),n},async generateQuotation({commit:o},e){try{const a="https://lending.presta.co.ke/kopesha/api/v1/quotation/generate",n=await x.post(a,e);return o("setQuotationNumber",n.data.quotationNumber),n}catch(a){alert(a.message)}},async fetchLoanCalculations({commit:o},e){try{o("setLoanCalculationResponse",[{quotationNumber:0,principal:0,repayAmount:0,interestAmount:0,loanFeeSummary:0,totalPeriods:0,otherCharges:0,monthlyCharges:0}])}catch(a){alert(a.message)}},async fetchLoanSchedule({commit:o},e){try{o("setLoanSchedule",[{periodNo:1,installmentNo:1,reducingBalance:2e4,principal:2344,interestAmount:5667,installment:7422,balance:34534,totalAmount:7987},{periodNo:2,installmentNo:2,reducingBalance:2e4,principal:2344,interestAmount:5667,installment:7422,balance:34534,totalAmount:7987}])}catch(a){alert(a.message)}}}}),fo={class:"flex h-auto"},ho=ae({setup(o){return P(),(e,a)=>{const n=y("router-view");return d(),p("div",fo,[b(n)])}}});const j="https://accounts.presta.co.ke/authentication",$=new Headers;$.append("Authorization","*/*");const yo=$,bo="GET",F=document.getElementById("spinner");F&&(F.style.display="block");alert(j);R({url:j,method:bo,headers:yo},{withCredentials:!0}).then(o=>{alert(JSON.stringify(o));function e(){ne(ho).use(mo).use(E).mount("#app")}e(),E.commit("set_current_user",o);const a=document.getElementById("loader");a&&(a.style.display="none")}).catch(o=>{const e=window.location.href;window.location.href=`https://accounts.presta.co.ke?redirect_url=${e}`});
